# Copyright (c) 2021 by Michael Arsollon
# derived from original game at https://github.com/endless-sky/endless-sky
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.  See the GNU General Public License for more details.



mission "Harvesting: Fossil Acquisitions"
	invisible
	repeat
	minor
	source Alexandria
	to offer
		random < 20
	on offer
		require Fossil
		dialog
			`If there is any place in the galaxy to find a serious buyer for the alien fossil you found, this is definitely it. After asking around for a bit, you finally find an official who is interested in purchasing a fossil. You have to answer some questions about how you obtained the fossil, but the process is quick and simple. Once you complete the transaction, you will be short one fossil, but 400,000 credits richer.`
	on accept
		outfit Fossil -1
		payment 400000
		fail
		
mission "Harvesting: Fossil Researcher"
	invisible
	repeat
	minor
	source
		attributes "research"
	to offer
		random < 40
	on offer
		require Fossil
		dialog
			`<planet> has a noticeable scientific community present. If there is any place in the galaxy to find a serious buyer for the alien fossil you found, this might be it. After asking around for a bit, you finally find a researcher who is interested in purchasing a fossil. You have to answer some questions about how you obtained the fossil, but the process is quick and simple. Once you complete the transaction, you will be short one fossil, but 300,000 credits richer.`
	on accept
		outfit Fossil -1
		payment 300000
		fail

mission "Harvesting: Fossil Collector"
	invisible
	repeat
	minor
	source
		attributes "paradise"
	to offer
		random < 60
	on offer
		require Fossil
		dialog
			`The paradise worlds are filled with people who have more money than sense. If there is any place in the galaxy to quickly find a a rich sucker willing to pay ridiculous sums of money for the alien fossil you found, this could be it. After asking around for a bit, you finally find a collector who is interested in purchasing a fossil. Once you complete the transaction, you will be short one fossil, but 200,000 credits richer.`
	on accept
		"Midnight Market" ++
		outfit Fossil -1
		payment 200000
		fail



mission "Harvesting: Mysterious Treasure 1"
	invisible
	repeat
	minor
	source Alexandria
	to offer
		random < 20
	on offer
		require "Mysterious Treasure"
		conversation
			scene "outfit/treasure"
			`After asking around for a bit, you finally find an archaeology expert who is willing to appraise your Mysterious Treasure for a modest donation of 10,000 credits.`
			choice
				`	(Make a donation.)`
				`	(Do not make a donation.)`
					defer
			branch "alien treasure"
				random < 5
			`	"Hmm... This appears to be a an artifact from Earth's distant past. It has some historical value and should fetch a decent sum."`
			``
			`	You wonder if there are more crates of treasure buried where you found this.`
				decline
			label "alien treasure"
			`	"Hmm... Amazing! This appears to be an artifact from an unknown alien civilization that once occupied what is now human space! A rare find, it should fetch a significant sum!"`
			``
			`	You wonder if there are more crates of treasure buried where you found this.`
				accept
	on decline
		payment -10000
		outfit "Mysterious Treasure" -1
		outfit "Earth Artifact" 1
	on accept
		payment -10000
		outfit "Mysterious Treasure" -1
		outfit "Alien Artifact" 1
		fail



mission "Harvesting: Mysterious Treasure 2"
	invisible
	repeat
	minor
	source Alexandria
	to offer
		"Treasure Hunter" >= 5
		random < 10
	on offer
		require "Mysterious Treasure"
		conversation
			scene "outfit/treasure"
			`After asking around for a bit, you finally find an archaeology expert who is willing to appraise your Mysterious Treasure for a modest donation of 20,000 credits.`
			choice
				`	(Make a donation.)`
				`	(Do not make a donation.)`
					defer
			branch "alien treasure"
				random < 10
			`	"Hmm... This appears to be a an artifact from Earth's distant past. It has some historical value and should fetch a decent sum."`
			``
			`	You wonder if there are more crates of treasure buried where you found this.`
				decline
			label "alien treasure"
			`	"Hmm... Amazing! This appears to be an artifact from an unknown alien civilization that once occupied what is now human space! A rare find, it should fetch a significant sum!"`
			``
			`	You wonder if there are more crates of treasure buried where you found this.`
				accept
	on decline
		payment -20000
		outfit "Mysterious Treasure" -1
		outfit "Earth Artifact" 1
	on accept
		payment -20000
		outfit "Mysterious Treasure" -1
		outfit "Alien Artifact" 1
		fail



mission "Harvesting: Mysterious Treasure 3"
	invisible
	repeat
	minor
	source Alexandria
	to offer
		"Treasure Hunter" >= 10
		random < 5
	on offer
		require "Mysterious Treasure"
		conversation
			scene "outfit/treasure"
			`After asking around for a bit, you finally find an archaeology expert who is willing to appraise your Mysterious Treasure for a modest donation of 30,000 credits.`
			choice
				`	(Make a donation.)`
				`	(Do not make a donation.)`
					defer
			branch "alien treasure"
				random < 15
			`	"Hmm... This appears to be a an artifact from Earth's distant past. It has some historical value and should fetch a decent sum."`
			``
			`	You wonder if there are more crates of treasure buried where you found this.`
				decline
			label "alien treasure"
			`	"Hmm... Amazing! This appears to be an artifact from an unknown alien civilization that once occupied what is now human space! A rare find, it should fetch a significant sum!"`
			``
			`	You wonder if there are more crates of treasure buried where you found this.`
				accept
	on decline
		payment -30000
		outfit "Mysterious Treasure" -1
		outfit "Earth Artifact" 1
	on accept
		payment -30000
		outfit "Mysterious Treasure" -1
		outfit "Alien Artifact" 1
		fail



mission "Harvesting: Mysterious Treasure Thief"
	deadline 7
	minor
	name "Artifact Thief"
	description "The <npc> has stolen one of your Alien Artifacts. Pursue their ship and reclaim the stolen artifact! Then return to <destination>. If you haven't found them by <date>, they probably escaped."
	repeat
	source Zug
	to offer
		has "Rim Archaeology 6: declined"
		"Treasure Hunter" >= 10
		random < 35
	on offer
		require "Mysterious Treasure"
		conversation
			scene "outfit/treasure"
			`You happen to know a archaeologist on Zug who might be willing to appraise one of your Mysterious Treasures.`
			choice
				`	(Consult Albert Foster.)`
				`	(Not now.)`
					defer
			`	Foster Agrees to take a look at one of your Mysterious Treasures. "Hmm... Amazing! This appears to be an artifact from an unknown alien civilization that once occupied what is now human space! A rare find, it should fetch a significant sum!"`
			``
			branch "thief"
				random < 50

			`	While enjoying dinner with Foster and his team, you wonder if there are more crates of treasure buried where you found this.`
				decline
			label "thief"

			`	While enjoying dinner with Foster and his team, you wonder if there are more crates of treasure buried where you found this.`
			``
			`	Suddenly, Albert receives a message. He informs you that there's been a break in at his facility and the Mysterious Treasure was stolen! If you hurry, you might be able to catch the thief. A ship named <npc> was spotted fleeing the area.`
				launch
	on decline
		outfit "Mysterious Treasure" -1
		outfit "Alien Artifact" 1
	on accept
		outfit "Mysterious Treasure" -1
	npc board
		government "Independent (Killable)"
		personality target waiting fleeing
			confusion 10
		fleet
			names "independent"
			commodities "Luxury Goods"
			variant
				"Marauder Arrow (Alien Artifact)"
			variant
				"Marauder Bounder (Alien Artifact)"
			variant
				"Marauder Raven (Alien Artifact)"
			variant
				"Marauder Quicksilver (Alien Artifact)"
		dialog "Your Alien Artifact is probably being kept in the ship's cargo hold."
	on complete
		dialog `Foster apologizes, "Thieves sometimes break in to steal an artifact. It's been a problem since the news broadcast our discovery of the Sheragi ruins."`

mission "Harvesting: Mysterious Treasure Zug"
	invisible
	repeat
	minor
	source Zug
	to offer
		has "Rim Archaeology 6: declined"
		"Treasure Hunter" < 10
		random < 50
	on offer
		require "Mysterious Treasure"
		conversation
			scene "outfit/treasure"
			`You happen to know a archaeologist on Zug who might be willing to appraise one of your Mysterious Treasures. Unfortunately, he's unavailable.`
			choice
				`	(Ask Amelia for her appraisal.)`
				`	(Look for an appraisal elsewhere.)`
					defer
			branch "mystery"
				random < 20
			`	After examining the Mysterious Treasure, Amelia says, "Hmm... This appears to be a an artifact from Earth's distant past. It has some historical value and should fetch a decent sum."`
			``
			`	You wonder if there are more crates of treasure buried where you found this.`
				decline
			label "mystery"
			scene "outfit/unknown"
			`	After examining the Mysterious Treasure, Amelia says, "Hmm... Nope. Sorry. This could be an alien artifact, but I'm not certain. You should ask someone more knowledgeable to be sure."`
			``
			`	It's too bad Foster wasn't here to do the appraisal.`
				accept
	on decline
		outfit "Mysterious Treasure" -1
		outfit "Earth Artifact" 1
	on enter
		dialog phrase "angry treasure pirates"
	npc kill
		government "Pirate"
		personality plunders nemesis heroic
			confusion 20
		fleet "pirate raid" 3

phrase "angry treasure pirates"
	word
		`You're hailed by some pirates: "You stole it! You stole `
	word
		`the precious!"`
		`my family jewels!"`
		`my treasure!"`
		`our treasure!"`
		`my grandmother's war trophies!"`
		`my grandfather's war trophies!"`
phrase "angry treasure pirates"
	word
		`You're hailed by some pirates: "You stole it! You stole `
	word
		`the treasure of `
	phrase
		"pirate"



mission "Harvesting: Mysterious Treasure Greenrock"
	minor
	invisible
	deadline 3
	source "Greenrock"
	to offer
		has "Saving Artifacts 2: done"
		or
			not "outfit (flagship installed): Ancient Pictograph"
			has "Midnight Pictograph 2: declined"
			has "Randomize Midnight Pictograph 2"
		random < 40
	on offer
		require "Mysterious Treasure"
		conversation
			scene "outfit/treasure"
			`You notice the shop "Fine Art and Cultural Treasures" is open. Do you want to have them appraise your Mysterious Treasure?`
			choice
				`	(Enter the shop.)`
				`	(Not now.)`
					defer
			`	The clerk welcomes you back. After looking over the Mysterious Treasure, he says it's a rare Earth Artifact and offers to buy it outright for 200,000 credits.`
			choice
				`	(Sell the Earth Artifact.)`
				`	(Keep the Earth Artifact.)`
					goto keep
			action
				clear "Harvesting: Mysterious Treasure Greenrock: offered"
				outfit "Mysterious Treasure" -1
				payment 200000
			`	The clerk grins and hands over 200,000 credits in exchange for the Earth Artifact. "Thanks. One of the local warlords has been looking for this. If any of his people spotted you walking around the spaceport with it, you would have attracted unwanted attention..."`
				decline
			label keep
			action
				outfit "Mysterious Treasure" -1
				outfit "Earth Artifact" 1
			`	You decide to keep the Earth Artifact. A smirk begins to crawl across his face, and he leans in. "Take care. One of the local warlords has been looking for this. If any of his people spots you walking around the spaceport with it, you might attract unwanted attention..."`
				accept
	on enter
		dialog `One of the pirate ships hails you. "You have something I want. Prepare to be boarded!" This must be the warlord the Fine Art and Cultural Treasures clerk warned you about.`
	npc
		government "Pirate"
		personality target waiting heroic plunders
			confusion 20
		fleet "Small Southern Pirates" 4
	npc
		to spawn
			random < 50
		government "Pirate"
		personality target waiting heroic plunders
			confusion 20
		fleet "Small Southern Pirates"
	npc
		to spawn
			random < 25
		government "Pirate"
		personality target waiting heroic plunders
			confusion 20
		fleet "Small Southern Pirates"
	npc kill
		government "Pirate"
		personality target waiting heroic plunders
			confusion 20
		fleet
			names "pirate"
			cargo 1
			variant
				"Falcon"
			variant
				"Falcon (Flamethrower)"
			variant
				"Falcon (Inferno Rockets)"
			variant
				"Falcon (Isochronal)"
			variant
				"Falcon (Quad Mod Blaster)"
			variant
				"Falcon (Twin Torpedo Pod)"
			variant
				"Falcon (Heavy)"
			variant
				"Falcon (Prisoner Transport)"
			variant
				"Falcon (Laser)"
			variant
				"Falcon (Plasma)"
			variant
				"Falcon (Laser Chaser)"
			variant
				"Falcon (Javelin)"
			variant
				"Osprey"
			variant
				"Osprey (Flamethrower)"
			variant
				"Osprey (Inferno Rockets)"
			variant
				"Osprey (Isochronal)"
			variant
				"Osprey (Twin Torpedo Pod)"
			variant
				"Osprey (Laser)"
			variant
				"Osprey (Missile)"
			variant
				"Osprey (Particle Anti-Missile)"
			variant
				"Bastion"
			variant
				"Bastion (Flamethrower)"
			variant
				"Bastion (Inferno Rockets)"
			variant
				"Bastion (Quad Mod Blaster)"
			variant
				"Bastion (Heavy)"
			variant
				"Bastion (Laser)"
			variant
				"Bastion (Gatling)"
		on kill
			fail

mission "Harvesting: Mysterious Treasure Greenrock Patch"
	landing
	invisible
	to offer
		has "Harvesting: Mysterious Treasure Greenrock: declined"
		not "Harvesting: Mysterious Treasure Greenrock: failed"
	on offer
		clear "Harvesting: Mysterious Treasure Greenrock: offered"
		fail


mission "Harvesting: Mysterious Treasure Researcher"
	invisible
	repeat
	minor
	deadline 3
	source
		government "Republic" "Syndicate" "Free Worlds"
		attributes "research"
		not planet "Alexandria" "Zug"
	to offer
		random < 40
	on offer
		require "Mysterious Treasure"
		conversation
			scene "outfit/treasure"
			`<planet> has a noticeable scientific community present. After asking around for a bit, you finally find an archaeology expert who is willing to appraise your Mysterious Treasure for a modest donation of 10,000 credits.`
			choice
				`	(Make a donation.)`
				`	(Do not make a donation.)`
					defer
			branch "alien treasure"
				random < 5
			`	"Hmm... This appears to be a an artifact from Earth's distant past. It has some historical value and should fetch a decent sum."`
			``
			`	You wonder if there are more crates of treasure buried where you found this.`
				decline
			label "alien treasure"
			`	"Hmm... Amazing! This appears to be an artifact from an unknown alien civilization that once occupied what is now human space! A rare find, it should fetch a significant sum!"`
			``
			`	You wonder if there are more crates of treasure buried where you found this.`
				accept
	on decline
		payment -10000
		outfit "Mysterious Treasure" -1
		outfit "Earth Artifact" 1
	on accept
		payment -10000
		outfit "Mysterious Treasure" -1
		outfit "Alien Artifact" 1
	on enter
		dialog `You're hailed by some bounty hunters: "We'll be taking that treasure... And the reward for your head!"`
	npc kill
		government "Bounty Hunter"
		personality plunders nemesis heroic
			confusion 10
		fleet "Hired Guns"
		on kill
			fail


mission "Harvesting: Earth Exhibits [0]"
	job
	repeat
	deadline 60
	name "Earth Exhibit"
	description "The Museum of History on <destination> wants to enhance their collection of exhibits in preparation for the upcoming Earth Day celebration. Deliver an Earth Artifact to the museum by <date>. Payment is <payment>."
	source
		government "Republic" "Syndicate" "Free Worlds" "Independent" "Neutral"
		attributes "frontier"
	destination Earth
	to offer
		or
			has "Harvesting: Mysterious Treasure 1: declined"
			has "Harvesting: Mysterious Treasure 2: declined"
			has "Harvesting: Mysterious Treasure 3: declined"
			has "Harvesting: Mysterious Treasure Zug: declined"
			has "Harvesting: Mysterious Treasure Researcher: declined"
		or
			and
				month == 1
				day > 22
			and
				month == 2
				day < 22
		random < 20
	on complete
		outfit "Earth Artifact" -1
		payment 400000
		conversation
			scene "outfit/treasure"
			`The museum curator accepts the rare artifact and rewards you with <payment>.`

mission "Harvesting: Earth Exhibits [1]"
	job
	repeat
	deadline 30
	name "Earth Exhibit"
	description "The Museum of History on <destination> wants to enhance their collection of exhibits in preparation for the upcoming Earth Day celebration. Deliver an Earth Artifact to the museum by <date>. Payment is <payment>."
	source
		government "Republic" "Syndicate" "Free Worlds" "Independent" "Neutral"
		not attributes "near earth"
		not attributes "frontier"
	destination Earth
	to offer
		or
			has "Harvesting: Mysterious Treasure 1: declined"
			has "Harvesting: Mysterious Treasure 2: declined"
			has "Harvesting: Mysterious Treasure 3: declined"
			has "Harvesting: Mysterious Treasure Zug: declined"
			has "Harvesting: Mysterious Treasure Researcher: declined"
		or
			and
				month == 2
				day > 22
			and
				month == 3
				day < 22
		random < 20
	on complete
		outfit "Earth Artifact" -1
		payment 400000
		conversation
			scene "outfit/treasure"
			`The museum curator accepts the rare artifact and rewards you with <payment>.`

mission "Harvesting: Earth Exhibits [2]"
	job
	repeat
	deadline 30
	name "Earth Exhibit"
	description "The Museum of History on <destination> wants to enhance their collection of exhibits in preparation for the upcoming Earth Day celebration. Deliver an Earth Artifact to the museum by <date>. Payment is <payment>."
	source
		government "Republic" "Syndicate" "Free Worlds" "Independent" "Neutral"
		not attributes "near earth"
		not attributes "frontier"
	destination Earth
	to offer
		or
			has "Harvesting: Mysterious Treasure 1: declined"
			has "Harvesting: Mysterious Treasure 2: declined"
			has "Harvesting: Mysterious Treasure 3: declined"
			has "Harvesting: Mysterious Treasure Zug: declined"
			has "Harvesting: Mysterious Treasure Researcher: declined"
		or
			and
				month == 2
				day > 22
			and
				month == 3
				day < 22
		random < 20
	on complete
		outfit "Earth Artifact" -1
		payment 400000
		conversation
			scene "outfit/treasure"
			`The museum curator accepts the rare artifact and rewards you with <payment>.`

mission "Harvesting: Earth Exhibits [3]"
	job
	repeat
	deadline
	name "Earth Exhibit (Rush Delivery)"
	description "The Museum of History on <destination> wants to enhance their collection of exhibits in preparation for the upcoming Earth Day celebration. Deliver an Earth Artifact to the museum by <date>. Payment is <payment>."
	source
		not planet "Earth"
		attributes "near earth"
	destination Earth
	to offer
		or
			has "Harvesting: Mysterious Treasure 1: declined"
			has "Harvesting: Mysterious Treasure 2: declined"
			has "Harvesting: Mysterious Treasure 3: declined"
			has "Harvesting: Mysterious Treasure Zug: declined"
			has "Harvesting: Mysterious Treasure Researcher: declined"
		or
			and
				month == 3
				day > 22
			and
				month == 4
				day < 15
		random < 20
	on complete
		outfit "Earth Artifact" -1
		payment 600000
		conversation
			scene "outfit/treasure"
			`The museum curator accepts the rare artifact and rewards you with <payment>.`

mission "Harvesting: Earth Exhibits [4]"
	job
	repeat
	deadline
	name "Earth Exhibit (Rush Delivery)"
	description "The Museum of History on <destination> wants to enhance their collection of exhibits in preparation for the upcoming Earth Day celebration. Deliver an Earth Artifact to the museum by <date>. Payment is <payment>."
	source
		not planet "Earth"
		attributes "near earth"
	destination Earth
	to offer
		or
			has "Harvesting: Mysterious Treasure 1: declined"
			has "Harvesting: Mysterious Treasure 2: declined"
			has "Harvesting: Mysterious Treasure 3: declined"
			has "Harvesting: Mysterious Treasure Zug: declined"
			has "Harvesting: Mysterious Treasure Researcher: declined"
		or
			and
				month == 3
				day > 22
			and
				month == 4
				day < 15
		random < 20
	on complete
		outfit "Earth Artifact" -1
		payment 600000
		conversation
			scene "outfit/treasure"
			`The museum curator accepts the rare artifact and rewards you with <payment>.`

mission "Harvesting: Earth Exhibits [5]"
	job
	repeat
	deadline
	name "Earth Exhibit (Rush Delivery)"
	description "The Museum of History on <destination> wants to enhance their collection of exhibits in preparation for the upcoming Earth Day celebration. Deliver an Earth Artifact to the museum by <date>. Payment is <payment>."
	source
		not planet "Earth"
		attributes "near earth"
	destination Earth
	to offer
		or
			has "Harvesting: Mysterious Treasure 1: declined"
			has "Harvesting: Mysterious Treasure 2: declined"
			has "Harvesting: Mysterious Treasure 3: declined"
			has "Harvesting: Mysterious Treasure Zug: declined"
			has "Harvesting: Mysterious Treasure Researcher: declined"
		or
			and
				month == 3
				day > 22
			and
				month == 4
				day < 15
		random < 20
	on complete
		outfit "Earth Artifact" -1
		payment 600000
		conversation
			scene "outfit/treasure"
			`The museum curator accepts the rare artifact and rewards you with <payment>.`



mission "Harvesting: Alien Exhibits"
	job
	repeat
	deadline 30
	name "Alien Exhibit"
	description "The Museum of History on <destination> wants to enhance their collection for an upcoming exhibition. Deliver an Alien Artifact to the museum by <date>. Payment is <payment>."
	source
		government "Republic" "Syndicate" "Free Worlds" "Independent" "Neutral"
		not attributes "near earth"
	destination
		distance 1 2
		government "Republic" "Syndicate" "Free Worlds" "Independent" "Neutral"
		attributes "urban"
		not attributes "near earth"
	to offer
		or
			has "Harvesting: Mysterious Treasure 1: failed"
			has "Harvesting: Mysterious Treasure 2: failed"
			has "Harvesting: Mysterious Treasure 3: failed"
			has "Harvesting: Mysterious Treasure Thief: done"
			has "Harvesting: Mysterious Treasure Researcher: done"
			has "Harvesting: Mysterious Treasure Researcher: active"
		random < 5
	on complete
		outfit "Alien Artifact" -1
		payment 2000000
		conversation
			scene "outfit/treasure"
			`The museum curator accepts the rare artifact and rewards you with <payment>.`



mission "Treasure Map: Archipelago"
	minor
	name "Treasure Map: Archipelago"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
		attributes "north" "south" "core"
	waypoint "Archipelago"
	to offer
		has "event: Archipelago reveal"
		random < 15
	on offer
		conversation
			scene "outfit/map"
			`An old pirate who reeks of rum approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Archipelago system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Archipelago"
	on enter "Archipelago"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Archipelago"
		personality waiting staying mining harvests uninterested
			confusion 10
		ship "Mule (Cudgel)" "Treasure Hunter"
		ship "Dagger (Cudgel)" "Golden Spike"

event "Treasure: Archipelago"
	system Archipelago
		add minables treasure 1 3


mission "Treasure Map: Terminus"
	minor
	name "Treasure Map: Terminus"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Terminus"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A shady street vendor pushing a cart loaded with various knick-knacks approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Terminus system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Terminus"
		set "Treasure: Terminus Patched"
	on enter "Terminus"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Terminus"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Terminus"
	system Terminus
		add minables treasure 1 3

mission "Treasure Map: Terminus Patch"
	landing
	invisible
	to offer
		has "event: Treasure: Terminus"
		not "Treasure: Terminus Patched"
	on offer
		event "Treasure: Terminus"
		fail

mission "Treasure Map: Kugel"
	minor
	name "Treasure Map: Kugel"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Kugel"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A woman wearing a black eyepatch approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Kugel system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Kugel"
	on enter "Kugel"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Kugel"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Kugel"
	system Kugel
		add minables treasure 1 3

mission "Treasure Map: Kugel Patch"
	landing
	invisible
	to offer
		has "event: Treasure: Terminus"
		not "Treasure: Terminus Patched"
		not "event: Treasure: Kugel"
	on offer
		event "Treasure: Kugel Patch"
		fail

event "Treasure: Kugel Patch"
	system Kugel
		remove minables treasure 1 3

mission "Treasure Map: Gamma Cassiopeiae"
	minor
	name "Treasure Map: Gamma Cassiopeiae"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Gamma Cassiopeiae"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A boy with a peg leg approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Gamma Cassiopeiae system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Gamma Cassiopeiae"
	on enter "Gamma Cassiopeiae"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Gamma Cassiopeiae"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Gamma Cassiopeiae"
	system "Gamma Cassiopeiae"
		add minables treasure 1 3


mission "Treasure Map: Durax"
	minor
	name "Treasure Map: Durax"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Durax"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A man with a cybernetic arm approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Durax system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Durax"
	on enter "Durax"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Durax"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Durax"
	system Durax
		add minables treasure 1 3


mission "Treasure Map: Unagi"
	minor
	name "Treasure Map: Unagi"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Unagi"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`An old man with a wooden staff approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Unagi system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Unagi"
	on enter "Unagi"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Unagi"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Unagi"
	system Unagi
		add minables treasure 1 3


mission "Treasure Map: Lolami"
	minor
	name "Treasure Map: Lolami"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Lolami"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A man with a thick black beard approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Lolami system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Lolami"
	on enter "Lolami"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Lolami"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Lolami"
	system Lolami
		add minables treasure 1 3


mission "Treasure Map: Regulus"
	minor
	name "Treasure Map: Regulus"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Regulus"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A woman carrying a waterproof scroll case approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Regulus system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Regulus"
	on enter "Regulus"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Regulus"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Regulus"
	system Regulus
		add minables treasure 1 3


mission "Treasure Map: Fingol"
	minor
	name "Treasure Map: Fingol"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Fingol"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A man tightly gripping a leather pouch approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Fingol system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Fingol"
	on enter "Fingol"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Fingol"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Fingol"
	system Fingol
		add minables treasure 1 3


mission "Treasure Map: Nocte"
	minor
	name "Treasure Map: Nocte"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Nocte"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A man with an ancient navy cutlass strapped to his hip approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Nocte system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Nocte"
	on enter "Nocte"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Nocte"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Nocte"
	system Nocte
		add minables treasure 1 3


mission "Treasure Map: Hintar"
	minor
	name "Treasure Map: Hintar"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Hintar"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A man holding a small wooden box approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Hintar system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Hintar"
	on enter "Hintar"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Hintar"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Hintar"
	system Hintar
		add minables treasure 1 3


mission "Treasure Map: Orvala"
	minor
	name "Treasure Map: Orvala"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Orvala"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A man dragging a six foot long pine box behind him approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Orvala system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Orvala"
	on enter "Orvala"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Orvala"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Orvala"
	system Orvala
		add minables treasure 1 3


mission "Treasure Map: Boral"
	minor
	name "Treasure Map: Boral"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Boral"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A man dressed like a cowboy approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Boral system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Boral"
	on enter "Boral"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Boral"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Boral"
	system Boral
		add minables treasure 1 3


mission "Treasure Map: Naper"
	minor
	name "Treasure Map: Naper"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Naper"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A woman carrying a black cat approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Naper system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Naper"
	on enter "Naper"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Naper"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Naper"
	system Naper
		add minables treasure 1 3


mission "Treasure Map: Umbral"
	minor
	name "Treasure Map: Umbral"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Umbral"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A bum wearing filthy rags approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Umbral system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Umbral"
	on enter "Umbral"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Umbral"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Umbral"
	system Umbral
		add minables treasure 1 3


mission "Treasure Map: Sadr"
	minor
	name "Treasure Map: Sadr"
	description "Use an Asteroid Scanner to search <waypoints> for buried treasures. (The treasures will be there even after completing/aborting this mission)"
	source
		government "Pirate"
	waypoint "Sadr"
	to offer
		random < 1
	on offer
		conversation
			scene "outfit/map"
			`A man with a snake tatoo approaches you. "Would you be interested in purchasing a treasure map for 1,000,000 credits?"`
			`	This seems like a dubious offer, but then again it could be real. Do you buy the map?`
			choice
				`	(Buy the map.)`
				`	(Don't buy the map.)`
					defer
			scene "outfit/asteroid scanner"
			`	You exchange your credits for "the map", which includes an Asteroid Scanner frequency. The seller explains, "Travel to <waypoints> and use this frequency to scan the asteroids. You'd never find them without this."`
			choice
				`	"Them?"`
			`	The seller nods before walking away. It isn't clear how many of those asteroids have treasures in them, but finding them could keep you busy for a long time...`
				accept
	on accept
		log "Treasure Maps" "Purchased a treasure map for the Sadr system."
		payment -1000000
		"Treasure Hunter" ++
		event "Treasure: Sadr"
	on enter "Sadr"
		dialog `There is someone else mining the asteroids. Perhaps you're not the only one who bought a treasure map.`
	npc kill
		government "Independent"
		system "Sadr"
		personality waiting staying mining harvests uninterested
			confusion 10
		fleet "Treasure Hunters"

event "Treasure: Sadr"
	system Sadr
		add minables treasure 1 3